<app-langding-page-nav-bar></app-langding-page-nav-bar>
<div class="msg-app-content  post-page-background">
  <div class="container">
    <div class="margin-top-90">
      <div class="row">
        <div class="col-md-3 p-r ">
          <div class="hpanel ">
            <div class="panel-body no-padding border-radius-top-left-right-6">
              <div class="chat-users">
                <div class="user-filter">
                  <div class="custom-text custom-text " style="display: flex;" >
                    <mat-form-field appearance="fill" class="matfie custom-text messagedropdowCss">
                      <mat-select name="contactfilter" [(ngModel)]="contactfil" id=""
                        (selectionChange)="eventSelection($event.value)">
                        <mat-option class="mat-options custom-text" value="" selected>All</mat-option>
                        <mat-option class="mat-options custom-text" value="USER">User</mat-option>
                        <mat-option class="mat-options custom-text" value="JOB">Job</mat-option>
                        <mat-option class="mat-options custom-text" value="CANDIDATE">Candidate</mat-option>
                        <mat-option class="mat-options custom-text" value="GROUP">Group</mat-option>
                        <mat-option class="mat-options custom-text" value="BUSINESS">Business</mat-option>
                        <!-- <mat-option class="mat-options" value="COMMUNITY">Community</mat-option>
                        <mat-option class="mat-options" value="NETWORK">Network</mat-option> -->
                        <mat-option class="mat-options custom-text" value="TEAM">Team</mat-option>
                        <mat-option class="mat-options custom-text" value="SUPPORT">Gigsumo Support</mat-option>
                      </mat-select>
                    </mat-form-field>

                    <!-- <div class="btn-group max-data btn msg-btn-righ" dropdown>
                      <p id="button-basic" dropdownToggle type="button" class=" dropdown-toggle btn-sm">
                        <i class="fa fa-plus"></i>
                      </p>
                      <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu dropdown-valueRight" role="menu"
                        aria-labelledby="button-basic">
                        <li role="menuitem">
                          <a class="dropdown-item" (click)="openNewContactModal(newContactModal)">New
                            Private Chat</a>
                        </li>
                        <li role="menuitem">
                          <a class="dropdown-item" (click)="openGroupContactModal(groupModal)">New
                            Group Chat</a>
                        </li>
                      </ul>
                    </div> -->


                  </div>
                </div>
                <!-- [style.height.px]="chatHeight" -->
                <div class="users-list">


                  <ng-container *ngFor="let item of tempContactList | messageContact: contactfil">
                    <div class="chat-user"   [ngClass]="{'active': (SelectedContact['groupId'] === item['groupId'])}">

                      <img class="chat-avatar" *ngIf="item.groupType=='GROUP'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/groupimg.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/groupimg.png'"
                        onerror="src='assets/icon/groupimg.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='USER'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        onerror="src='assets/images/userAvatar.png'">


                      <img class="chat-avatar" *ngIf="item.groupType=='JOB'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        onerror="src='assets/images/userAvatar.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='CANDIDATE'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        onerror="src='assets/images/userAvatar.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='NETWORK'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-share-400.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-share-400.png'"
                        onerror="src='assets/icon/icons8-share-400.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='TEAM'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-people-100.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-people-100.png'"
                        onerror="src='assets/icon/icons8-people-100.png'">


                      <img class="chat-avatar" *ngIf="item.groupType=='BUSINESS'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/gallery/company.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/gallery/company.png'"
                        onerror="src='assets/images/gallery/company.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='COMMUNITY'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-myspace-400.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-myspace-400.png'"
                        onerror="src='assets/icon/icons8-myspace-400.png'">

                      <div class="chat-user-name">
                        <div title="{{item['groupName']}}" class="chat-name-msgname">{{item['groupName']}}</div>
                      </div>

                    </div>
                  </ng-container>

                  <ng-container *ngFor="let item of  contactList | messageContact: contactfil">
                    <div class="chat-user"  [ngClass]="{'active': SelectedContact['groupId'] === item['groupId'] }"
                      (click)="redirectUrl(item)">

                      <img class="chat-avatar" *ngIf="item.groupType=='GROUP'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/groupimg.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/groupimg.png'"
                        onerror="src='assets/icon/groupimg.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='USER'&&item['groupLogo']" [src]="imgUrl+item['groupLogo']">
                      <div class="chat-avatar"*ngIf="item.groupType=='USER'&&!item['groupLogo']">
                        <div   [style.background-color]="getColorfullname(item['groupName'])">
                          <div class="circleuser-text ">{{ getInitialsfullname(item['groupName']) }}</div>
                        </div>
                      </div>
                      <img class="chat-avatar" *ngIf="item.groupType=='JOB'&&item['groupLogo']" [src]="imgUrl+item['groupLogo']">
                      <div class="chat-avatar"*ngIf="item.groupType=='JOB'&&!item['groupLogo']">
                        <div   [style.background-color]="getColorfullname(item['groupName'])">
                          <div class="circleuser-text ">{{ getInitialsfullname(item['groupName']) }}</div>
                        </div>
                      </div>
                      <img class="chat-avatar" *ngIf="item.groupType=='CANDIDATE'&&item['groupLogo']" [src]="imgUrl+item['groupLogo']">
                      <div class="chat-avatar"*ngIf="item.groupType=='CANDIDATE'&&!item['groupLogo']">
                        <div   [style.background-color]="getColorfullname(item['groupName'])">
                          <div class="circleuser-text ">{{ getInitialsfullname(item['groupName']) }}</div>
                        </div>
                      </div>

                      <img class="chat-avatar" *ngIf="item.groupType=='NETWORK'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-share-400.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-share-400.png'"
                        onerror="src='assets/icon/icons8-share-400.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='TEAM'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-people-100.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-people-100.png'"
                        onerror="src='assets/icon/icons8-people-100.png'">


                      <img class="chat-avatar" *ngIf="item.groupType=='BUSINESS'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/gallery/company.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/gallery/company.png'"
                        onerror="src='assets/images/gallery/company.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='COMMUNITY'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-myspace-400.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-myspace-400.png'"
                        onerror="src='assets/icon/icons8-myspace-400.png'">

                        <img class="chat-avatar" *ngIf="item.groupType=='SUPPORT'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/Sumoface_final.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/Sumoface_final.png'"
                        onerror="src='assets/icon/Sumoface_final.png'">

                      <div class="chat-user-name 1 ">
                        <span *ngIf="item.groupType=='JOB'||item.groupType=='CANDIDATE'||item.groupType=='USER'"[ngClass]="item['online'] ? 'online-dot' : 'offline-dot' "  class="pull-left label label-success font-size:x-large; "> . </span>
                        <div *ngIf="item.groupType=='NETWORK'" title="{{item['groupName']}}" class="chat-name-msgname">
                          (N)
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='TEAM'" title="{{item['groupName']}}" class="chat-name-msgname"> (T)
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='GROUP'" title="{{item['groupName']}}" class="chat-name-msgname">
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='BUSINESS'" title="{{item['groupName']}}" class="chat-name-msgname">
                          (B) {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='COMMUNITY'" title="{{item['groupName']}}"
                          class="chat-name-msgname">
                          (C) {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='USER'" title="{{item['groupName']}}" class="chat-name-msgname">
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='JOB'" title="{{item['groupName']}}" class="chat-name-msgname">
                          {{item['groupName']}} </div>

                        <div *ngIf="item.groupType=='CANDIDATE'" title="{{item['groupName']}}"
                          class="chat-name-msgname">
                          {{item['groupName']}} </div>

                        <div *ngIf="item.groupType=='SUPPORT'" title="{{item['groupName']}}" class="chat-name-msgname"> Support </div>

                        <div class="chat-td">
                          <div style="font-size: 10px;" *ngIf="!dateDiff(item['lastMessageOn'])"> {{item['lastMessageOn'] | date: 'MM/dd/yyyy'}}</div>
                          <div style="font-size: 10px;" *ngIf="dateDiff(item['lastMessageOn'])"> {{item['lastMessageOn'] | date: 'h:mm a'}}</div>
                          <div>
                            <span class="pull-right label label-success"
                              *ngIf="item['nonSeenCount'] && item['nonSeenCount'] > 0   ">{{item['nonSeenCount']}}</span>
                          </div>
                        </div>

                        <!-- <div> -->
                          <p *ngIf="item.groupType=='CANDIDATE' || item.groupType=='JOB'" class="chat-name-msgname"
                            title="{{item?.entityId}}">
                            {{item['entityId'] }}</p>
                        <!-- </div> -->

                        <div class="created-by "
                          *ngIf="item['groupType']!='USER' && item['groupType']!='CANDIDATE' && item['groupType']!='JOB' && item.title !=null && item.title?.lenght !=0">
                          Initiated by
                          <span style="font-weight:bold" *ngIf="item.title=='Gigsumo Support'"> You </span>
                          <span style="font-weight:bold"  *ngIf="item.title!='Gigsumo Support'"> {{item.title}} </span>
                          <p class="created-by"
                            *ngIf="item['groupType']!='USER' && item.lastMessagedUserName !=null  && item.lastMessagedUserName?.lenght !=0">
                            Last Message by <span style="font-weight:bold"> {{item.lastMessagedUserName}} </span> </p>
                        </div>

                      </div>



                    </div>
                  </ng-container>

                  <ng-container *ngFor="let item of remainingContact | messageContact: contactfil">
                    <div class="chat-user"   [ngClass]="{'active': SelectedContact['groupId'] === item['groupId'] }"
                      (click)="redirectUrl(item)">

                      <span class="pull-right label label-success"
                        *ngIf="item['nonSeenCount'] && item['nonSeenCount'] > 0 ">{{item['nonSeenCount']}}</span>

                      <img class="chat-avatar" *ngIf="item.groupType=='GROUP'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/groupimg.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/groupimg.png'"
                        onerror="src='assets/icon/groupimg.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='USER'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/images/userAvatar.png'"
                        onerror="src='assets/images/userAvatar.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='NETWORK'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-share-400.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-share-400.png'"
                        onerror="src='assets/icon/icons8-share-400.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='TEAM'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-people-100.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-people-100.png'"
                        onerror="src='assets/icon/icons8-people-100.png'">



                      <img class="chat-avatar" *ngIf="item.groupType=='BUSINESS'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] :'assets/images/gallery/company.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] :'assets/images/gallery/company.png'"
                        onerror="src='assets/images/gallery/company.png'">

                      <img class="chat-avatar" *ngIf="item.groupType=='COMMUNITY'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-myspace-400.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/icons8-myspace-400.png'"
                        onerror="src='assets/icon/icons8-myspace-400.png'">

                        <img class="chat-avatar" *ngIf="item.groupType=='SUPPORT'"
                        [src]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/Sumoface_final.png'"
                        [alt]="item['groupLogo'] ? imgUrl+item['groupLogo'] : 'assets/icon/Sumoface_final.png'"
                        onerror="src='assets/icon/Sumoface_final.png'">

                      <div class="chat-user-name">

                        <span *ngIf="item['online']"
                          class="pull-left label label-success online-dot font-size:x-large; ">. </span>

                        <div *ngIf="item.groupType=='NETWORK'" title="{{item['groupName']}}" class="chat-name-msgname">
                          (N)
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='TEAM'" title="{{item['groupName']}}" class="chat-name-msgname"> (T)
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='GROUP'" title="{{item['groupName']}}" class="chat-name-msgname">
                          {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='BUSINESS'" title="{{item['groupName']}}" class="chat-name-msgname">
                          (B) {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='COMMUNITY'" title="{{item['groupName']}}"
                          class="chat-name-msgname">
                          (C) {{item['groupName']}}</div>
                        <div *ngIf="item.groupType=='USER'" title="{{item['groupName']}}" class="chat-name-msgname">
                          {{item['groupName']}}</div>

                          <div *ngIf="item.groupType=='SUPPORT'" title="{{item['groupName']}}" class="chat-name-msgname">
                            Support</div>

                        <div class="float-right dksu">{{item['lastMessageOn'] | date: 'MM/dd/yyyy, h:mm a'}}</div>

                        <div class="created-by"
                          *ngIf="item['groupType']!='USER' && item.title !=null && item.title?.lenght !=0"> Initiated by
                          <span style="font-weight:bold"> {{item.title}} </span>
                          <p class="created-by"
                            *ngIf="item['groupType']!='USER' && item.lastMessagedUserName !=null  && item.lastMessagedUserName?.lenght !=0">
                            Last Message by <span style="font-weight:bold"> {{item.lastMessagedUserName}} </span> </p>
                        </div>

                      </div>
                    </div>
                  </ng-container>
                  <!-- <div style="visibility: hidden; position: fixed;" [style.left]="menuTopLeftPosition.x"
                    [style.top]="menuTopLeftPosition.y" [matMenuTriggerFor]="rightMenu"></div>

                   <mat-menu #rightMenu="matMenu">
                    <ng-template matMenuContent let-item="item">
                      <button mat-menu-item (click)="deleteitem(item.content)"> Delete </button>
                      <button mat-menu-item > Deactive </button>
                    </ng-template>
                  </mat-menu> -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 p-l col-pd-0">
          <div [ngSwitch]="messageStatus">
            <div *ngSwitchCase="selectMessage.EMPTY">
              <!-- <div class="row"> -->
              <!-- <div class="col-md-12 padding-left-5 p-r">
                <div class="hpanel m-b-0">
                  <div class="panel-body no-padding">
                    <ng-container *ngIf="emptyMsgOpt.opt === 'empty'; then emptyscreen; else emptyscreen">
                    </ng-container>
                  </div>
                </div>
              </div> -->
              <!-- </div> -->
              <!-- <div class="row"> -->
              <div class="col-md-12 p-r padding-left-5  p-r">
                <div class="hpanel ">
                  <div class="panel-body empty-message-container-1 border-radius-top-left-right-6">
                    <div class="empty-message">
                      <!-- <div class="row" style="text-align: center;"> -->

                      <!-- <div class="col-md-12"> -->
                      <div>Select Contact and start your conversation</div>
                      <!-- </div> -->
                      <!-- <div class="col-md-12"> -->
                      <div class="msg-sel-btn">
                        <button type="button" class="btn btn-primary btn-sm"
                          (click)="openNewContactModal(newContactModal)" style="margin-right: 10px;">
                          Private Chat
                        </button>
                        <button type="button" class="btn btn-primary btn-sm"
                          (click)="openGroupContactModal(groupModal)">
                          Group Chat
                        </button>
                      </div>
                      <!-- </div> -->
                      <!-- </div> -->
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <div *ngSwitchCase="selectMessage.MESSAGE">
              <!-- <div class="row"> -->
              <div class="col-md-12 padding-left-5  p-r">
                <div class="hpanel m-b-0">
                  <div class="panel-body no-padding border-radius-top-left-right-6">
                    <div class="chat-discussion-header border-radius-top-left-right-6">
                      <ng-container [ngTemplateOutlet]="selecteduser"></ng-container>
                    </div>
                  </div>
                </div>
              </div>
              <!-- </div> -->
              <!-- <div class="row"> -->
              <div class="col-md-12 padding-left-5 p-r">
                <div class="hpanel ">
                  <div class="panel-body no-padding">
                    <div class="chat-discussion-top">
                      <!-- <div class="chat-discussion" id="chat-discussion" #chartDiscussion messagescroll infiniteScroll
                      [infiniteScrollDistance]="2"
                      [infiniteScrollUpDistance]="1.5"
                       [infiniteScrollUpDistance]="9.9" [scrollWindow]="false" [infiniteScrollThrottle]="1500"
                       (scrolled)="onScrollDown()"
                      (scrolledUp)="onScrollUp()"> -->



                       <!-- <p *ngIf="messageList?.length==0">Start Conversation</p> -->




                      <div class="chat-discussion" id="chat-discussion" #chartDiscussion  messagescroll
                        infiniteScroll [infiniteScrollDistance]="4" [infiniteScrollUpDistance]="6"
                        [scrollWindow]="false" (scrolled)="onScrollDown()" (scrolledUp)="onScrollUp()">

                        <ng-container  *ngIf="messageList?.length==0">
                           <div class="nodata-found-msg">
                             <img src="assets/images/no-chat-found.gif" >
                           </div>
                         </ng-container>


                        <ng-container *ngFor="let item of sortByMsg(messageList, 'sentDate') | messageunique">
                          <div class="chat-message" *ngIf="item.eventType=='CHAT' || item.eventType==null"
                            [id]="item['messageId']"
                            [ngClass]="{'right': item['authorId'] === userId, 'left': item['authorId'] !== userId}">

                            <div class="btn-group three_icon_cmon1 hover" dropdown>

                              <a id="button-animated" dropdownToggle *ngIf="item.enableDelete && item.authorId==userId">
                                <img src="assets/icon/icons8-more-96.png" alt="" srcset="" class="three-dot" />
                              </a>
                              <ul id="dropdown-animated" *dropdownMenu class="dropdown-menu" role="menu"
                                style="right: 0; left: auto;margin-top: -23px;" aria-labelledby="button-animated">
                                <ng-container>
                                  <li role="menuitem">
                                    <a (click)="edit(item)">
                                      <i class="fas fa-pencil-alt m-5"></i> Edit
                                    </a>
                                  </li>
                                  <li role="menuitem">
                                    <a (click)="delete(item)">
                                      <i class="fas fa-trash m-5"></i> Delete
                                    </a>
                                  </li>
                                </ng-container>
                              </ul>
                            </div>
                            <img *ngIf="item['authorPhoto']" class="message-avatar"
                            [src]="imgUrl+item['authorPhoto']">

                        <div class="message-avatar" *ngIf="!item['authorPhoto']">
                            <div class="circles mr-rt-10" [style.background-color]="getColorfullname(item['authorName'])">
                                <div class="circle-text">{{ getInitialsfullname(item['authorName']) }}</div>
                            </div>
                        </div>

                            <div class="message" [id]="item['message']">
                              <a class="message-author"> {{item['authorName']}}
                              </a>
                              <!-- <span class="message-date"> {{item['sentDate'] | date: "EEE, MMM d, y, h:mm"}} </span> -->

                              <span class="message-date"> {{item['sentDate'] | date:'EEE, MM/dd/yyyy h:mm:ss a'}} </span>
                              <!-- <span class="message-date"> {{  datechange(item['sentDate']) }} </span> -->
                              <span class="message-content" style=" word-wrap: break-word"
                                [innerHTML]="item['message']"> </span>
                              <div style="width: 100%;">
                                <div style="display: flex; flex-wrap: wrap;">
                                  <div *ngFor="let at of item.attachments; let a = index;">

                                    <ng-container>
                                      <ng-container *ngIf="at['attachmentType'] === 'image'">
                                        <img [src]="imgUrl+at['url']" height="92" style="margin: 3px;"
                                          (click)="showImageAndVideoPreview(item, a)">
                                      </ng-container>

                                      <!-- <ng-container *ngIf="at['t'] === 'image'">
                                        <img [src]="at['src']" height="92" style="margin: 3px;"
                                          (click)="showImageAndVideoPreview(item, a)">
                                      </ng-container>

                                      <ng-container *ngIf="at['t'] === 'video'">
                                        <video height="92" style="margin: 3px;"
                                          (click)="showImageAndVideoPreview(item, a)">
                                          <source [src]="imgUrl+at['src']" [type]="at['mimetype']" />
                                          Browser not supported
                                        </video>
                                      </ng-container> -->

                                      <ng-container *ngIf="at['attachmentType'] === 'video'">
                                        <video height="92" style="margin: 3px;"
                                          (click)="showImageAndVideoPreview(item, a)">
                                          <source [src]="imgUrl+at['url']" [type]="at['mimetype']" />
                                          Browser not supported
                                        </video>
                                      </ng-container>


                                      <ng-container *ngIf="at['attachmentType'] === 'application'">
                                        <div class="attach-application">
                                          name
                                        </div>
                                      </ng-container>
                                      <ng-container *ngIf="at['attachmentType'] === 'audio'">
                                      </ng-container>
                                      <ng-container *ngIf="at['attachmentType'] === 'others'">
                                        <div class="attach-others">
                                          name
                                        </div>
                                      </ng-container>
                                    </ng-container>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="chat-message" *ngIf="item.eventType=='ACTION'" [id]="item['messageId']"
                            [ngClass]="{'right': item['authorId'] === userId, 'left': item['authorId'] !== userId}">
                            <span class="message-content" style="text-align: center; color: #655b4e;font-size: 10px;"
                              [innerHTML]="item['oldMessage'] "></span>
                          </div>




                        </ng-container>
                      </div>

                      <div class="panel-footer msg-panel-footer borders"
                        *ngIf="messageStatus === selectMessage.MESSAGE">
                        <ng-container *ngIf="!attachment && !imageAttachmentEdit">
                          <form style="display: flex; width: 100%;" *ngIf="SelectedContact.status!='INACTIVE'" #myForm="ngForm">
                            <div class="message-attachment">
                              <i class="pe-7s-paperclip"> </i>
                              <input type="file" multiple id="attachmentfile" name="file"
                                accept=" .jpg, .jpeg, .png , audio/*,video/*,image/*"
                                (change)="fileUpload($event,'', 'fileupload')" #UploadFileInput />

                            </div>

                            <div class="send-msg-txt">

                              <div [(ngModel)]="sendMessageData['message']" name="message" [ngxSummernote]="config"
                               summernoteValidator  #message="ngModel"  required>
                              </div>



                            </div>
                            <div class="send-msg-btn" style="margin-top: 7px;"
                              *ngIf="!editMessage && !imageAttachmentEdit">
                              <button type="submit" id="sendmsg" [disabled]="editorDisabled || message.errors?.summernoteEmpty"
                                class="btn btn-primary btn-sm" (click)="sendMessage()">
                                Send
                              </button>
                            </div>

                            <div class="send-msg-btn" style="margin-top: 7px;" *ngIf="editMessage">
                              <button type="submit" id="sendmsg" [disabled]="editorDisabled || message.errors?.summernoteEmpty"
                                class="btn btn-primary btn-sm" (click)="updateMsg()">
                                update
                              </button>
                            </div>
                          </form>
                        </ng-container>
                        <div *ngIf="attachment && imageAttachmentEdit==false" style="width: 100%;">
                          <div style="display: flex; flex-wrap: wrap;">
                            <div style="position: relative; float: left;"
                              *ngFor="let item of uploadFiles; let i = index;">
                              <ng-container *ngIf="item['t'] === 'image'">
                                <img [src]="item['src']" style="margin-bottom: 10px; height: 93px;margin-right: 10px;">
                                <i class="pe-7s-trash attach-remove" (click)="removeAttachMent(item, i)"></i>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'video'">
                                <video style="margin-bottom: 10px; height: 93px;margin-right: 10px;" controls
                                  (click)="toggleVideo()" #videoPlayer>
                                  <source [src]="item['src']" [type]="item['ft']" />
                                  Browser not supported
                                </video>
                                <i class="pe-7s-trash attach-remove" (click)="removeAttachMent(item, i)"></i>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'application'">
                                <div class="attach-application">
                                  <i class="pe-7s-trash attach-remove"></i>

                                </div>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'audio'">
                                <div class="attach-application">
                                  <i class="pe-7s-trash attach-remove"></i>
                                  <audio controls>
                                    <source [src]="item['src']" [type]="item['ft']">
                                    Your browser does not support the audio tag.
                                  </audio>
                                </div>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'others'">
                                <div class="attach-others">
                                  <i class="pe-7s-trash attach-remove"></i>

                                </div>
                              </ng-container>
                            </div>
                            <div class="col-md-3 upload-file">
                              <button type="button" name="" id="" class="btn">
                                <i class="pe-7s-plus"></i>
                                <input type="file" multiple accept=" .jpg, .jpeg, .png ,audio/*,video/*,image/*"
                                  id="attachmentfile" name="file"
                                  (change)="fileUpload($event, UploadFileInput, 'update')" #UploadFileInput />
                              </button>
                            </div>
                          </div>

                          <div class="row">
                            <div class="col-md-12" style="display: flex; flex-wrap: wrap;">
                              <form style="display: flex; width: 100%;" (submit)="sendMessageWithAttachment()" *ngIf="SelectedContact.status !== 'INACTIVE'" #myForm="ngForm">
                                <div class="send-msg-txt" style="flex-grow: 1;">
                                  <div [(ngModel)]="sendMessageData['message']" name="message" [ngxSummernote]="config" summernoteValidator #message="ngModel" id="summessage" required>
                                  </div>
                                </div>
                                <div class="send-msg-btn" style="margin-top: 7px;">
                                  <button class="btn btn-primary btn-sm" type="submit" id="sendmsg">
                                    Send
                                  </button>
                                </div>
                              </form>
                            </div>
                          </div>

                        </div>

                        <!--   image Edit update  -->

                        <div *ngIf="imageAttachmentEdit" style="width: 100%;">
                          <div style="display: flex; flex-wrap: wrap;">
                            <div style="position: relative; float: left;"
                              *ngFor="let item of uploadFiles; let i = index;">
                              <ng-container *ngIf="item['t'] === 'image'">
                                <img [src]="item['src']" *ngIf="item?.edit==undefined"
                                  style="margin-bottom: 10px; height: 93px;margin-right: 10px;">
                                <img [src]="imgUrl+item.url" *ngIf="item?.edit==true"
                                  style="margin-bottom: 10px; height: 93px;margin-right: 10px;">
                                 <i class="pe-7s-trash attach-remove" (click)="removeAttachMentedit(item, i)"></i>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'video'">
                                <video *ngIf="item?.edit==undefined"
                                  style="margin-bottom: 10px; height: 93px;margin-right: 10px;" controls
                                  (click)="toggleVideo()" #videoPlayer>
                                  <source [src]="item['src']" [type]="item['ft']" />
                                  Browser not supported
                                </video>

                                <video *ngIf="item?.edit==true"
                                  style="margin-bottom: 10px; height: 93px;margin-right: 10px;" controls
                                  (click)="toggleVideo()" #videoPlayer>
                                  <source [src]="imgUrl+item.url" [type]="item['ft']" />
                                  Browser not supported
                                </video>

                                <i class="pe-7s-trash attach-remove" (click)="removeAttachMentedit(item, i)"></i>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'application'">
                                <div class="attach-application">
                                  <i class="pe-7s-trash attach-remove"></i>

                                </div>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'audio'">
                                <div class="attach-application">
                                  <i class="pe-7s-trash attach-remove"></i>
                                  <audio controls>
                                    <source [src]="item['src']" [type]="item['ft']">
                                    Your browser does not support the audio tag.
                                  </audio>
                                </div>
                              </ng-container>
                              <ng-container *ngIf="item['t'] === 'others'">
                                <div class="attach-others">
                                  <i class="pe-7s-trash attach-remove"></i>

                                </div>
                              </ng-container>
                            </div>
                            <div class="col-md-3 upload-file">
                              <button type="button" name="" id="" class="btn">
                                <i class="pe-7s-plus"></i>
                                <input type="file" multiple accept=" .jpg, .jpeg, .png ,audio/*,video/*,image/*"
                                  id="attachmentfile" name="file"
                                  (change)="fileUpload($event, UploadFileInput, 'update')" #UploadFileInput />
                              </button>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-12" style="display: flex; flex-wrap: wrap;">
                              <form style="display: flex; width: 100%;" *ngIf="SelectedContact.status!='INACTIVE'">
                                <div class="send-msg-txt">
                                   <div [(ngModel)]="sendMessageData['message']"  summernoteValidator   #messagesss="ngModel"  name="messagesss" id="summessage"
                                    [ngxSummernote]="config"></div>
                                </div>
                                <div class="send-msg-btn">
                                  <button class="btn btn-primary btn-sm " type="submit" id="sendmsg" *ngIf="uploadFiles.length>0"
                                    (click)="updatemediaApi()"  [disabled]="uploadFiles.length <= 0"  >
                                    update
                                  </button>

                                  <button class="btn btn-primary btn-sm " type="submit" id="sendmsg"  *ngIf="uploadFiles.length==0"
                                  (click)="updatemediaApi()"  [disabled]="messagesss?.errors?.summernoteEmpty " >
                                  update
                                </button>
                                </div>

                              </form>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- </div> -->
            </div>
          </div>
        </div>

        <div class="col-md-3 padding-left-5">
          <app-common-widget [page]="'MESSAGE_PAGE'"></app-common-widget>
        </div>


      </div>
    </div>
  </div>
  <ng-template #emptyscreen>
    <div class="chat-discussion-header b-r-5">
      <div class="header-right row">
        <div class="start col-md-3">
          <!-- <span *ngIf="unreadUserMsgCount > 0">Messages <b>{{unreadUserMsgCount}}</b> of Messages </span> -->
        </div>
        <div class="middle col-md-7">

        </div>
        <div class="end col-md-2">
          <!-- <button type="button" class="btn btn-primary btn-sm" (click)="getNewMesage()">New Message</button> -->
          <div class="btn-group" dropdown style="margin-top: -2px; margin-left: -11px;">
            <button id="button-basic" dropdownToggle type="button" class="btn btn-primary dropdown-toggle btn-sm"
              aria-controls="dropdown-basic">
              New Chat <span class="caret"></span>
            </button>
            <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
              <li role="menuitem">
                <a class="dropdown-item" (click)="openNewContactModal(newContactModal)">New
                  Private Chat</a>
              </li>
              <li role="menuitem">
                <a class="dropdown-item" (click)="openGroupContactModal(groupModal)">New
                  Group Chat</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #groupModal>

    <div class="common-header-flex">
      <div>New Group Message </div>
      <button><span class="common-close" (click)="closeNewContactModal()" aria-hidden="true">&times;</span></button>
    </div>
    <div class="modal-body" style="padding: 10px !important;">
      <div class="userlist message-memberss" #scrollableDiv infiniteScroll [infiniteScrollDistance]="1"
        [infiniteScrollUpDistance]="2" [scrollWindow]="false" (scrolled)="onScrollcontacts()">
        <div class="message-search">
          <div>
            <div class="col-sm-6">
              <div class="input-group f-l">
                <input type="text" class="form-control" name="groupname" id="" aria-describedby="helpId"
                  placeholder="Search New Contact" (keyup)="searchgetMembersForGroup()" [(ngModel)]="searchContent">
                <span class="input-group-addon" id="my_btn"><i class="pe-7s-search"></i></span>
              </div>
            </div>
            <div class="col-sm-6">
              <input type="text" class="form-control" [(ngModel)]="groupData.groupName" trim="blur" name="groupName" id=""
                aria-describedby="helpId" placeholder="Enter Group Name">
            </div>
          </div>
        </div>

        <div class="message-content " style="margin-top: 42px;">
          <div class="chat-user" *ngFor="let item of newContactList;let i=index;">
            <div class="row">
              <div class="col-md-9">
                <img class="chat-avatar" *ngIf="item['photo']" [src]="imgUrl+item['photo']">
                <div class="chat-avatar" *ngIf="!item['photo']">
                  <div [style.background-color]="getColorfullname(item['groupName'])">
                    <div class="circleuser-text ">{{ getInitialsfullname(item['groupName']) }}</div>
                  </div>
                </div>
                <div class="chat-user-name">
                  <a title="{{item['groupName']}}"> {{item['groupName']}}</a>
                </div>
              </div>
              <div class="col-md-3">
                <div class="group-check-box">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="checkbox" class="form-check-input" [(ngModel)]="item.checked" name="contacts" id=""
                        [value]="item['groupId']" (change)="addUserToGroup($event, item['groupId'],item)">
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>
      <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>
      <!-- <pagination-controls *ngIf="paginationFlag" class="left-page-align" (click)="pagecount(page)"
                        (pageChange)="page = $event">
                      </pagination-controls> -->


      <!-- <div class="group-name">
                        <div class="form-group">
                          <input type="text" class="form-control" [(ngModel)]="groupData.groupName" name="groupName" id=""
                            aria-describedby="helpId" placeholder="Enter Group Name">
                        </div>
                      </div> -->
      <div class="group-btn">
        <button type="submit" class="btn btn-primary btn-block" (click)="createGroup()">Start Conversation</button>
      </div>
    </div>
  </ng-template>



  <!--  Business memberList view -->

  <ng-template #businessGrouplist >


    <div class="common-header-flex">
      <div>Business Admins</div>
      <button>
        <span class="common-close" (click)="closeNewContactModal()">&times;</span>
      </button>
    </div>


    <div class="modal-body" style="padding: 10px !important;">
      <div class="userlist message-memberss" #scrollableDiv infiniteScroll [infiniteScrollDistance]="1"
        [infiniteScrollUpDistance]="2" [scrollWindow]="false" (scrolled)="onscrollbusinessadminlist()">
        <div class="message-search">
          <div class="form-group">
            <div class="input-group f-l">
              <input type="text" class="form-control" name="groupname" id="" aria-describedby="helpId"
                placeholder="Search Admin" (keyup)="onsearchbusinessadminlist()" [(ngModel)]="searchContent">
              <span class="input-group-addon" id="my_btn"><i class="pe-7s-search"></i></span>
            </div>
          </div>
        </div>

        <div class="message-content">
          <div class="userlist">
            <div class="chat-user" *ngFor="let item of groupBusinessListMembers;let i=index;">
              <div class="row">
                <div class="col-md-9">
                  <img *ngIf="item['photo']" class="chat-avatar" [src]="imgUrl+item['photo']">
                  <div *ngIf="!item['photo']" class="business_Admin"
                    [style.background-color]="getColortwo(item?.firstName, item?.lastName)">
                    <div class="BA-text">{{ getInitialstwo(item?.firstName,
                      item?.lastName) }}</div>
                  </div>
                  <div class="chat-user-name">
                    <a title=" {{item['firstName']}} {{item['lastName']}}"> {{item['firstName']}} {{item['lastName']}}</a>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="group-check-box">
                    <div class="form-check">
                      <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" [(ngModel)]="item.checked"
                          [disabled]="item.disable||item.isSuperAdmin||SelectedContact.adminList[0]!=userId" name="contacts" [value]="item['userId']"
                          (change)="addUserToBusiness($event, item['userId'],item)">
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="group-name">
              <div class="form-group">
                <input type="text" class="form-control" [(ngModel)]="groupData.groupName" name="groupName" id=""
                  aria-describedby="helpId" placeholder="Enter Group Name">
              </div>
            </div> -->
      <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>
      <!-- <pagination-controls *ngIf="paginationFlag" class="left-page-align" (click)="pagecount(page)"
              (pageChange)="page = $event">
            </pagination-controls> -->

      <div class="group-btn">
        <button type="submit" *ngIf="SelectedContact.adminList[0]==userId" class="btn btn-primary btn-block"
          (click)="changeBusiness('BUSINESS')">Save</button>
      </div>

    </div>
  </ng-template>

  <!--  community memberList view -->

  <ng-template #communityMemberview>


    <div class="hpanel">
      <div class="panel-heading" style="padding: 18px;">
        <div style="color: white;">Community Admins</div>
        <div class="panel-tools">
          <button type="button" class="close pull-right close-btn-btn" aria-label="Close"
            (click)="closeNewContactModal()">
            <span style="font-size: 2.5rem;color: white;font-weight: 400;    position: relative; bottom: 21px;"
              aria-hidden="true">&times;</span>
          </button>
        </div>
      </div>
    </div>


    <div class="modal-body" style="padding: 10px !important;">
      <div class="message-search">
        <div class="form-group">
          <div class="input-group f-l">
            <input type="text" class="form-control" name="groupname" id="" aria-describedby="helpId"
              placeholder="Search Admin" (keyup)="onsearchMsgCommunity(searchBusgroupList)"
              [(ngModel)]="searchBusgroupList">
            <span class="input-group-addon" id="my_btn"><i class="pe-7s-search"></i></span>
          </div>
        </div>
      </div>

      <div class="message-content">
        <div class="userlist">
          <div class="chat-user"
            *ngFor="let item of groupCommunityListMembers | paginate: { itemsPerPage: 5, currentPage: page }">
            <div class="row">
              <div class="col-md-9">
                <img class="chat-avatar" [alt]="item['photo'] ? imgUrl+item['photo'] : 'assets/images/userAvatar.png'"
                  [src]="item['photo'] ? imgUrl+item['photo'] : 'assets/images/userAvatar.png'"
                  onerror="src='assets/images/userAvatar.png'">
                <div class="chat-user-name">
                  <a title="{{item['firstName']}} {{item['lastName']}}"> {{item['firstName']}} {{item['lastName']}}</a>
                </div>
              </div>
              <div class="col-md-3">
                <div class="group-check-box">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="checkbox" class="form-check-input" [(ngModel)]="item.checked"
                        [disabled]="item.disable" name="contacts" [value]="item['userId']"
                        (change)="addUserTocommunity($event, item['userId'],item)">
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="group-name">
          <div class="form-group">
            <input type="text" class="form-control" [(ngModel)]="groupData.groupName" name="groupName" id=""
              aria-describedby="helpId" placeholder="Enter Group Name">
          </div>
        </div> -->

        <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>
        <pagination-controls *ngIf="paginationFlag" class="left-page-align" (click)="pagecount(page)"
          (pageChange)="page = $event">
        </pagination-controls>


        <div class="group-btn">
          <button type="submit" *ngIf="SelectedContact.adminList[0]==userId" class="btn btn-primary btn-block"
            (click)="changeBusiness('COMMUNITY')">save</button>
        </div>
      </div>
    </div>
  </ng-template>



  <!-- Group Model for user Add -->

  <ng-template #groupAdduserModal>
    <!-- <div class="modal-header b-r-5" style="padding: 10px !important;">
        <h4 class="pull-left" style="margin: 0;">Add User</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeAdduserModel()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> -->

    <div class="common-header-flex">
      <div>Add User</div>
      <button>
        <span class="common-close" (click)="closeAdduserModel()" aria-hidden="true">&times;</span>
      </button>
    </div>


    <div class="modal-body" style="padding: 10px !important;">
      <div class="userlist message-memberss" #scrollableDiv infiniteScroll [infiniteScrollDistance]="1"
        [infiniteScrollUpDistance]="2" [scrollWindow]="false" (scrolled)="onScrollcontacts()">
        <div class="message-search">
          <div class="form-group">
            <input type="text" class="form-control" name="firstName" id="" aria-describedby="helpId"
              placeholder="Search New Contact" [(ngModel)]="searchContent"
              (keyup)="searchgetMembersForGroup()">
          </div>
        </div>
        <div class="message-content">
          <div class="userlist">
            <div class="chat-user"
              *ngFor="let item of newuserGroup;let i=index;">

              <div class="row">
                <div class="col-md-9">
                  <img *ngIf="item['photo']" class="chat-avatar" [src]="imgUrl+item['photo'] ">
                  <div *ngIf="!item['photo']" class="business_Admin"
                    [style.background-color]="getColortwo(item?.firstName, item?.lastName)">
                    <div class="BA-text">{{ getInitialstwo(item?.firstName,
                      item?.lastName) }}</div>
                  </div>
                  <div class="chat-user-name">
                    <a title="{{item['firstName']}} {{item['lastName']}}">{{item['firstName']}} {{item['lastName']}}</a>
                  </div>
                </div>

                <div class="col-md-3">
                  <div class="group-check-box">
                    <div class="form-check">
                      <label class="form-check-label">
                        <input type="checkbox" [(ngModel)]="item.checked" class="form-check-input" value="{{item.userId}}"
                          (change)="onCheckboxChange(item,$event,newuserGroup)">

                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>

        <!-- <pagination-controls *ngIf="paginationFlag" style="text-align:right;" id="pagination1"
            (click)="pagecount(newpage)" (pageChange)="newpage = $event">
          </pagination-controls> -->

        <div class="group-btn">
          <div class="row add-btn-cen">
            <button type="submit" class="btn btn-primary " (click)="addUser()">Add User</button>
          </div>
        </div>

      </div>
    </div>
  </ng-template>



  <ng-template #userProfileNetworkTeam>

    <div class="common-header-flex">
      <div title="{{groupNameshow}}">{{groupNameshow}} </div>
      <button>
        <span (click)="closeNewContactModal()" class="common-close">&times;</span>
      </button>
    </div>

    <div class="modal-body " style="padding: 10px !important;">
      <div class="message-content">
        <div class="userlist message-memberss" #scrollableDiv infiniteScroll [infiniteScrollDistance]="1"
          [infiniteScrollUpDistance]="2" [scrollWindow]="false" (scrolled)="onScrollDownNetworkMembers()">

          <div class="row">
            <div class="col-sm-12" *ngIf="SelectedContact.createdBy!=userId">
              <div class="form-group">
                <input type="text" class="form-control" name="firstName" id="" aria-describedby="helpId"
                  placeholder="Search Contact Name" [(ngModel)]="searchContent"
                  (keyup)="onsearchgroupmembers()">
              </div>
            </div>
          </div>

          <div class="chat-user " *ngFor="let item of groupUserList; let i=index;">

            <div class="row">
              <div class="col-md-10">
                <img *ngIf="item['photo']" class="chat-avatar" [src]="imgUrl+item['photo']">
                <div *ngIf="!item['photo']" class="business_Admin"
                  [style.background-color]="getColortwo(item?.firstName, item?.lastName)">
                  <div class="BA-text">{{ getInitialstwo(item?.firstName,
                    item?.lastName) }}</div>
                </div>
                <div class="chat-user-name">
                  <span *ngIf="item['online']=='ONLINE'"
                    class="pull-left label label-success online-dot font-size:x-large; ">
                    .</span>
                  <span *ngIf="item['offline']=='OFFLINE'"
                    class="pull-left label label-danger online-dot font-size:x-large; "> .
                  </span>
                  <a title="{{item['firstName']}} {{item['lastName']}}">{{item['firstName']}} {{item['lastName']}}
                  </a>
                  <p *ngIf="item.userId == TempGroupUserList?.group?.createdBy"> Owner </p>
                </div>
              </div>
              <div class="col-md-2">
                <div class="group-check-box"
                  *ngIf="TempGroupUserList?.groupMembers?.length>1 && SelectedContact.createdBy==userId">
                  <div class="form-check" *ngIf="item.userId!=userId">
                    <img class="remove-icon" src='assets/icon/delete_icon.png' (click)="removeGroupMember(item)">

                  </div>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="stopScroll" style="margin-top: 1rem;text-align: center;">

            <div class="col-md-12 mg-bt-9">
              <app-svg-templates [svgType]="'CHECKMARK_CIRCLE_SMALL'"></app-svg-templates>
            </div>
            <div class="col-md-12">
              <p class="biase">You've reached the bottom of the page</p>
            </div>

          </div>
        </div>
        <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>
      </div>
    </div>
  </ng-template>



  <ng-template #userProfiledata>

    <div class="common-header-flex">
      <div class="text-ellipse"title="{{groupNameshow}}">{{groupNameshow}}</div>
      <button>
        <span class="common-close" (click)="closeNewContactModal()" aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body" style="padding: 10px !important;">
      <div class="message-content">
        <div class="userlist message-memberss" #scrollableDiv infiniteScroll [infiniteScrollDistance]="1"
          [infiniteScrollUpDistance]="2" [scrollWindow]="false" (scrolled)="onScrollDownNetworkMembers()">

          <div class="row">
            <div class="col-sm-10" *ngIf="SelectedContact.createdBy==userId">
              <div class="form-group">
                <input type="text" class="form-control" name="firstName" id="" aria-describedby="helpId"
                  placeholder="Search Contact Name" [(ngModel)]="searchContent"
                  (keyup)="onsearchgroupmembers()">
              </div>
            </div>

            <div class="col-sm-12" *ngIf="SelectedContact.createdBy!=userId">
              <div class="form-group">
                <input type="text" class="form-control" name="firstName" id="" aria-describedby="helpId"
                  placeholder="Search Contact Name" [(ngModel)]="searchContent"
                  (keyup)="onsearchgroupmembers()">
              </div>
            </div>


            <div class="col-sm-2" style="padding-left: 0px;" *ngIf="SelectedContact.createdBy==userId">
              <p class="add-user-msg col-sm-12 cursor" (click)="addcontact(groupAdduserModal,groupAdduserModal)">
                <i class="fa fa-plus" aria-hidden="true"></i>
                Add
              </p>
            </div>
          </div>

          <div class="chat-user" *ngFor="let item of groupUserList;let i=index;">
            <div class="row">
              <div class="col-md-10">
                <img *ngIf="item['photo']" class="chat-avatar" [src]=" imgUrl+item['photo']">
                <div *ngIf="!item['photo']" class="business_Admin"
                  [style.background-color]="getColortwo(item?.firstName, item?.lastName)">
                  <div class="BA-text">{{ getInitialstwo(item?.firstName,
                    item?.lastName) }}</div>
                </div>
                <div class="chat-user-name">
                  <span *ngIf="item['offline']=='OFFLINE'"
                    class="pull-left label label-danger online-dot font-size:x-large; "> .
                  </span>
                  <span *ngIf="item['online']=='ONLINE'"
                    class="pull-left label label-success online-dot font-size:x-large; "> .
                  </span>

                  <a title="{{item['firstName']}} {{item['lastName']}}">{{item['firstName']}} {{item['lastName']}} </a>
                  <p *ngIf="item.userId == TempGroupUserList?.group?.createdBy"> Owner </p>
                </div>
              </div>
              <div class="col-md-2">
                <div class="group-check-box"
                  *ngIf="SelectedContact.createdBy==userId">
                  <div class="form-check" *ngIf="item.userId!=userId">
                    <img class="remove-icon" src='assets/icon/delete_icon.png' (click)="removeGroupMember(item)">
                    <!-- <label class="form-check-label">
                                <i class="fa fa-trash close-icon" (click)="removeGroupMember(item)"aria-hidden="true"></i>
                              </label> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>

      <div class="group-btn add-btn-cen"
        *ngIf="SelectedContact.groupType!='TEAM' || SelectedContact.groupType!='NETWORK'">

        <button type="submit" class="btn btn-primary" *ngIf="SelectedContact.createdBy!=userId"
          (click)="exitGroup('user')">Leave Group </button>
        <button type="submit" class="btn btn-primary " *ngIf="SelectedContact.createdBy==userId"
          (click)="exitGroup('owner')">Delete Group</button>
      </div>
    </div>

  </ng-template>

  <ng-template #newContactModal>
    <!-- <div class="modal-header b-r-5" style="padding: 10px !important;">
          <h4 class="pull-left" style="margin: 0;">New Message</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="closeNewContactModal()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div> -->
    <div class="common-header-flex">
      <div>New Message</div>
      <span class="common-close" (click)="closeNewContactModal()">&times;</span>
    </div>


    <div class="modal-body" style="padding: 10px !important;">
      <div class="userlist message-memberss" #scrollableDiv infiniteScroll [infiniteScrollDistance]="1"
        [infiniteScrollUpDistance]="2" [scrollWindow]="false" (scrolled)="onScrollcontacts()">
        <div class="message-search">
          <div class="form-group">
            <div class="input-group f-l">
              <input type="text" class="form-control" name="searchname" aria-describedby="helpId"
                     placeholder="Search New Contact" (keyup)="searchgetMembersForGroup()"
                     [(ngModel)]="searchContent">
              <span class="input-group-addon" id="my_btn"><i class="pe-7s-search"></i></span>
            </div>

          </div>
        </div>
        <div class="message-content">
          <div class="userlist">
            <div class="chat-user" *ngFor="let item of newContactList;let i=index;">
              <div class="row" (click)="singleRedirectUrl(item)">
                <div class="col-md-9 cur-po">
                  <img class="chat-avatar" *ngIf=" item['photo']" [src]="imgUrl+item['photo']">
                  <div class="chat-avatar" *ngIf=" !item['photo']">
                    <div [style.background-color]="getColorfullname(item['groupName'])">
                      <div class="circleuser-text ">{{ getInitialsfullname(item['groupName']) }}</div>
                    </div>

                  </div>
                  <div class="chat-user-name">
                    <a title="{{item['groupName']}}"> {{item['groupName']}}</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="stopScroll" style="margin-top: 1rem;text-align: center;">
            <div class="col-md-12 mg-bt-9">
              <app-svg-templates [svgType]="'CHECKMARK_CIRCLE_SMALL'"></app-svg-templates>
            </div>
            <div class="col-md-12">
              <p class="biase">You've reached the bottom of the page</p>
            </div>
          </div>
        </div>
      </div>

      <p *ngIf="!paginationFlag" style="text-align: center;"> No data found </p>
      <!-- <pagination-controls *ngIf="paginationFlag" class="left-page-align" (click)="pagecount(page)"
            (pageChange)="page = $event">
          </pagination-controls> -->
    </div>
  </ng-template>

  <ng-template #selecteduser>

    <div class="header-right chat-dis">
      <div  >

        <div class="chat-avatar cursor append-item" *ngIf="(SelectedContact?.adminList !=null && SelectedContact?.adminList[0]==userId && SelectedContact.groupType=='BUSINESS')
        ||(SelectedContact?.adminList !=null && SelectedContact?.adminList[0]==userId && SelectedContact.groupType=='COMMUNITY')
        ||(SelectedContact.createdBy==userId && SelectedContact.groupType=='GROUP' && SelectedContact.status=='ACTIVE')
        ||(SelectedContact.createdBy==userId && SelectedContact.groupType=='JOB' && SelectedContact.status=='ACTIVE')
        ||(SelectedContact.createdBy==userId && SelectedContact.groupType=='CANDIDATE' && SelectedContact.status=='ACTIVE')
        ||(SelectedContact.createdBy==userId && SelectedContact.groupType=='NETWORK')
        ||(SelectedContact.createdBy==userId && SelectedContact.groupType=='SUPPORT')
        ||(SelectedContact.createdBy==userId && SelectedContact.groupType=='TEAM')">
          <i class="fa fa-plus" *ngIf="SelectedContact.groupType!='CANDIDATE' && SelectedContact.groupType!='JOB'"
            (click)="addcontact('',groupAdduserModal,businessGrouplist,communityMemberview)" aria-hidden="true"></i>

        </div>


        <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='USER'&&SelectedContact['groupLogo']"
           [src]="imgUrl+SelectedContact['groupLogo']"
           (click)="routeProfie(SelectedContact)">
          <div class="chat-avatar" *ngIf="!SelectedContact['groupLogo']&&SelectedContact.groupType=='USER'">
            <div (click)="routeProfie(SelectedContact)"  [style.background-color]="getColorfullname(SelectedContact?.groupName)">
              <div class="circletext">{{ getInitialsfullname(SelectedContact?.groupName) }}</div>
            </div>
          </div>


          <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='SUPPORT'"
          onerror="src='assets/icon/Sumoface_final.png'" [src]="imgUrl+SelectedContact['groupLogo']"
          [alt]="imgUrl+SelectedContact['groupLogo']" (click)="routeProfie(SelectedContact)">


        <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='TEAM'" (click)="routeProfie(SelectedContact)"
          onerror="src='assets/icon/icons8-people-100.png'" [src]="imgUrl+SelectedContact['groupLogo']"
          [alt]="imgUrl+SelectedContact['groupLogo']">

        <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='NETWORK'"
          (click)="routeProfie(SelectedContact)"
          [src]="SelectedContact['groupLogo'] ? imgUrl+SelectedContact['groupLogo'] : 'assets/icon/icons8-share-400.png'">

        <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='BUSINESS'"
          (click)="routeProfie(SelectedContact)" onerror="src='assets/images/gallery/company.png'"
          [src]="imgUrl+SelectedContact['groupLogo']" [alt]="imgUrl+SelectedContact['groupLogo']">

        <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='COMMUNITY'"
          (click)="routeProfie(SelectedContact)" onerror="src='assets/icon/icons8-myspace-400.png'"
          [src]="imgUrl+SelectedContact['groupLogo']" [alt]="imgUrl+SelectedContact['groupLogo']">

          <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='JOB'&&SelectedContact['groupLogo']"
          [src]="imgUrl+SelectedContact['groupLogo']"
          >
         <div class="chat-avatar" *ngIf="!SelectedContact['groupLogo']&&SelectedContact.groupType=='JOB'">
           <div (click)="routeProfie(SelectedContact)"  [style.background-color]="getColorfullname(SelectedContact?.title)">
             <div class="circletext">{{ getInitialsfullname(SelectedContact?.title) }}</div>
           </div>
         </div>
         <img class="chat-avatar cursor" *ngIf="SelectedContact.groupType=='CANDIDATE'&&SelectedContact['groupLogo']"
         [src]="imgUrl+SelectedContact['groupLogo']"
         >
        <div class="chat-avatar" *ngIf="!SelectedContact['groupLogo']&&SelectedContact.groupType=='CANDIDATE'">
          <div (click)="routeProfie(SelectedContact)"  [style.background-color]="getColorfullname(SelectedContact?.title)">
            <div class="circletext">{{ getInitialsfullname(SelectedContact?.title) }}</div>
          </div>
        </div>
        <img class="chat-avatar cursor"
          *ngIf="SelectedContact.groupType=='GROUP'&& SelectedContact.isAutoGeneratedGroupName!=true "
          onerror="src='assets/icon/groupimg.png'" [src]="imgUrl+SelectedContact['groupLogo']"
          (click)="userData(SelectedContact,userProfiledata,businessGrouplist,userProfileNetworkTeam)"
          [alt]="imgUrl+SelectedContact['groupLogo']">

        <ng-container *ngIf="SelectedContact.groupType=='GROUP' && SelectedContact.isAutoGeneratedGroupName==true">
          <ng-container *ngFor="let item of SelectedContact.members; let i = index;">
            <img class="chat-avatar cursor" *ngIf="i<=3" onerror="src='assets/images/userAvatar.png'"
              [src]="imgUrl+item.photo"
              (click)="userData(SelectedContact,userProfiledata,businessGrouplist,userProfileNetworkTeam)"
              [alt]="imgUrl+item.photo">
            <span style="font-weight:bold;" *ngIf="i==4">..</span>
          </ng-container>
        </ng-container>


        <!-- <div class="select_name cursor"  *ngIf="SelectedContact.isAutoGeneratedGroupName!=true && SelectedContact.groupType!='COMMUNITY'"
            (click)="userData(SelectedContact,userProfiledata,businessGrouplist,userProfileNetworkTeam)"> {{SelectedContact['groupName']}}
        </div>
         -->
        <div class="select_name cursor"
          *ngIf="SelectedContact.isAutoGeneratedGroupName!=true && SelectedContact.groupType=='COMMUNITY'"
          (click)="userData(SelectedContact,userProfiledata,communityMemberview,userProfileNetworkTeam)"
          title="{{SelectedContact['groupName']}}"> {{SelectedContact['groupName']}}
        </div>

        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='TEAM'"
          (click)="userData(SelectedContact,userProfileNetworkTeam,businessGrouplist,userProfileNetworkTeam)"
          title="{{SelectedContact['groupName']}}"> {{SelectedContact['groupName']}}
        </div>

        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='NETWORK'"
          (click)="userData(SelectedContact,userProfileNetworkTeam,businessGrouplist,userProfileNetworkTeam)"
          title="{{SelectedContact['groupName']}}"> {{SelectedContact['groupName']}}
        </div>

        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='GROUP'"
          (click)="userData(SelectedContact,userProfiledata,businessGrouplist,userProfileNetworkTeam)"
          title="{{SelectedContact['groupName']}}"> {{SelectedContact['groupName']}}
        </div>

        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='BUSINESS'"
          (click)="userData(SelectedContact,userProfiledata,businessGrouplist,userProfileNetworkTeam)"
          title="{{SelectedContact['groupName']}}"> {{SelectedContact['groupName']}}
        </div>

        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='USER'"
          (click)="routeProfie(SelectedContact)" title="{{SelectedContact['groupName']}}">
          {{SelectedContact['groupName']}}
        </div>

        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='JOB'"
          title="{{SelectedContact['groupName']}}">
          {{SelectedContact['groupName']}}
        </div>
        <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='CANDIDATE'"
          title="{{SelectedContact['groupName']}}">
          {{SelectedContact['groupName']}}
        </div>

       <div class="select_name cursor" *ngIf=" SelectedContact.groupType =='SUPPORT'"
          title="Gigsumo Support">   Gigsumo Support
        </div>


        <div class="cursor"
          *ngIf="SelectedContact.groupType=='BUSINESS' && SelectedContact.nonSeenCount!=0 &&   SelectedContact.newstatus=='ACTIVE'"
          (click)="userData(SelectedContact,userProfiledata,businessGrouplist,userProfileNetworkTeam)">
          Business Admin<span *ngIf="SelectedContact.nonSeenCount!=0">s</span> :{{SelectedContact.nonSeenCount}}</div>

        <div class="cursor"
          *ngIf="SelectedContact.groupType=='GROUP' && SelectedContact.nonSeenCount!=0 &&  SelectedContact.status=='ACTIVE'"
          (click)="userData(SelectedContact,userProfiledata,businessGrouplist,communityMemberview)">
          Group Member<span *ngIf="SelectedContact.nonSeenCount>1">s</span> :{{SelectedContact.nonSeenCount}}</div>

        <div class="cursor members_word" *ngIf="SelectedContact.groupType=='TEAM' && SelectedContact.nonSeenCount!=0 &&
          SelectedContact.status=='ACTIVE' &&   SelectedContact.members.length!=0"
          (click)="userData(SelectedContact,userProfileNetworkTeam,businessGrouplist,communityMemberview)">
          Member<span *ngIf="SelectedContact.members.length>1">s</span> :
          <ng-container>
            <span *ngFor="let item of SelectedContact.members; let i=index;">
              <span *ngIf="i<1"> {{item.firstName}} </span>
              <span *ngIf="i==1 && SelectedContact.members.length==1" (click)="listofUsers(userProfileNetworkTeam)">, 1
                more.. </span>
              <span *ngIf="i==1 && SelectedContact.members.length>1" (click)="listofUsers(userProfileNetworkTeam)">,
                {{SelectedContact.members.length-1}} more.. </span>
            </span>
          </ng-container>
        </div>


        <div class="cursor members_word" *ngIf="SelectedContact.groupType=='NETWORK' && SelectedContact.nonSeenCount!=0 &&
           SelectedContact.status=='ACTIVE' &&   SelectedContact.members.length!=0"
          (click)="userData(SelectedContact,userProfileNetworkTeam,businessGrouplist,communityMemberview)">
          Member<span *ngIf="SelectedContact.members.length>1">s</span> :
          <ng-container>
            <span *ngFor="let item of SelectedContact.members; let i=index;">
              <span *ngIf="i<1"> {{item.firstName}} </span>
              <span *ngIf="i==1 && SelectedContact.members.length==1" (click)="listofUsers(userProfileNetworkTeam)">, 1
                more.. </span>
              <span *ngIf="i==1 && SelectedContact.members.length>1" (click)="listofUsers(userProfileNetworkTeam)">,
                {{SelectedContact.members.length-1}} more.. </span>
            </span>

          </ng-container>
        </div>



        <!-- <div class="cursor" *ngIf="SelectedContact.groupType=='NETWORK' && SelectedContact.nonSeenCount!=0 &&
           SelectedContact.status=='ACTIVE'"
            (click)="userData(SelectedContact,userProfileNetworkTeam,businessGrouplist,communityMemberview)">  Network Member
             <span *ngIf="SelectedContact.nonSeenCount>1">s</span> :{{SelectedContact.nonSeenCount}}</div> -->



        <div class="cursor"
          *ngIf="SelectedContact.groupType=='COMMUNITY' && SelectedContact.nonSeenCount!=0 &&  SelectedContact.newstatus=='ACTIVE'"
          (click)="userData(SelectedContact,userProfiledata,communityMemberview,communityMemberview)">
          Community Member<span *ngIf="SelectedContact.nonSeenCount>1">s</span> :{{SelectedContact.nonSeenCount}}</div>
      </div>
      <div class="third" style="margin-top: 2px; margin-top: -3px; margin-right: -123px;">
        <form class="navbar-form navbar-left app-form example-form">
          <input type="text" placeholder="Search..." [(ngModel)]="searchData.value" (input)="updateSearch($event)"
            debounceTime=1000 [matAutocomplete]="auto" autocomplete="off" name="searchData"
            class="searchBox form-control" #filterData>
          <!-- (keyup)="onSearchChange($event)"  -->
          <ng-container>
            <mat-autocomplete #auto="matAutocomplete" class="app-search-top">
              <ng-container *ngIf="searchData.value?.length>0">
                <mat-option *ngFor="let item of messageList | search: searchData.value" [value]="item['message']"
                  (click)="getSearchMessageDetails(item)">

                  <ng-container *ngIf="item.eventType=='CHAT' || item.eventType==null">
                    <span class="message-date">{{item['sentDate'] | date}}</span>
                    <ng-container *ngIf="item.attachements">
                      <ng-container *ngFor="let img_item of item.attachments">
                        <img class="chat-avatar cursor" *ngIf="img_item.attachmentType=='image'"
                          [src]="imgUrl+img_item.url">
                        <video class="chat-avatar cursor" *ngIf="img_item.attachmentType=='video'" controls
                          (click)="toggleVideo()" #videoPlayer>
                          <source [src]="imgUrl+img_item.url" /> Browser not supported
                        </video>

                      </ng-container>
                    </ng-container>

                    <span [innerHtml]="item['message'] " class="message-txt"></span>
                  </ng-container>
                  <ng-container *ngIf="item.eventType=='ACTION'">
                    <span [innerHtml]="item['oldMessage']" style="text-align: center;font-size: 10px; color: #655b4e;"
                      class="message-txt"></span>
                  </ng-container>

                </mat-option>

              </ng-container>

            </mat-autocomplete>
          </ng-container>
        </form>
      </div>
      <!-- <div class="third">
        <button type="button" class="btn btn-primary btn-sm">New Message</button>
        <ng-container *ngIf="emptyMsgOpt.opt === 'empty'; then emptyscreen; else emptyscreen">
        </ng-container>
      </div> -->
      <div class="forth" style="margin-top: 5px;">
        <!-- <button class="btn-xs" mat-mini-fab color="warn" (click)="closeOpenedMsg()">
          <mat-icon>close</mat-icon>
        </button> -->
        <button class="btn  btn-circle" style="border-radius: 50px !important;" type="button"
          (click)="closeOpenedMsg()">
          <!-- <i class="fa fa-times"></i> -->
          <app-svg-templates class="svg-position" [svgType]="'CROSS'"></app-svg-templates>
        </button>
        <!-- <button type="button" class="btn btn-danger btn-close-btn btn-xs" (click)="closeOpenedMsg()">
          <i class="pe-7s-close"></i>
        </button> -->
      </div>
    </div>
  </ng-template>


  <div class="fancybox">
    <div id="myModal" class="modall">
      <button class="close-button" onclick="closeModal()">×</button>

      <div
        style="display: flex; position: fixed; left: 0px; right: 0px; top: 0px; bottom: 0px; justify-content: center; align-items: center; flex-direction: column; flex: 1 1 auto; align-self: stretch; overflow: hidden; z-index: 10000;">
        <div role="none"
          style="position: relative; display: flex; flex-direction: column; flex-grow: 1; flex-shrink: 1; overflow: visible; align-items: stretch; align-self: stretch;">
          <div role="none"
            style="position: relative; display: flex; flex-direction: column; flex-grow: 1; flex-shrink: 1; overflow: visible; align-items: center; align-self: stretch; justify-content: flex-start;">
            <div role="none"
              style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: center; left: 0px; right: 0px; top: 0px; bottom: 0px; background-color: rgb(0, 0, 0); justify-content: center; opacity: 1; transition: none 0s ease 0s;">
            </div>
            <div role="none"
              style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px; transform: translateX(0px);">
              <div role="none" class="mySlidess" *ngFor="let item of fancyList"
                style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px; transform: translateX(0px);">
                <div role="none"
                  style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px; transform: translateY(0px);">
                  <div role="none"
                    style="position: relative; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: stretch; width: 100%; height: 100%;">
                    <div role="none"
                      style="position: relative; display: flex; flex-direction: column; flex-grow: 1; flex-shrink: 1; overflow: visible; align-items: stretch;">
                      <div
                        style="position: relative; display: flex; flex-direction: column; flex-grow: 1; flex-shrink: 1; overflow: visible; align-items: center; align-self: stretch; justify-content: center;">
                        <div
                          style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; justify-content: center; top: 0px; bottom: 0px; left: 0px; right: 0px; background-color: rgba(0, 0, 0, 0);">
                          <div role="none"
                            style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px; width: 100%; height: 100%; opacity: 1; transform: translateX(0px);">
                            <div role="none"
                              style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px; transform: translateY(0px);">
                              <div role="none"
                                style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px; transform: scale(1);">
                                <div role="none"
                                  style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: 0px; right: 0px; top: 0px; bottom: 0px;">
                                  <ng-container *ngIf="item['attachmentType'] === 'image'">
                                    <div
                                      style="position: absolute; overflow: visible; background-color: transparent; flex-grow: 0; flex-shrink: 0; left: 0px; right: 0px; top: 0px; bottom: 0px; align-items: stretch; background-position: center center; background-repeat: no-repeat; background-size: contain; border-style: none; display: flex;"
                                      [style.background-image]="'url('+imgUrl+item['url']+')'">
                                    </div>
                                  </ng-container>
                                  <ng-container *ngIf="item['attachmentType'] === 'video'">
                                    <div
                                      style="position: absolute; overflow: visible; background-color: transparent; flex-grow: 0; flex-shrink: 0; left: 0px; right: 0px; top: 0px; bottom: 0px; align-items: stretch; background-position: center center; background-repeat: no-repeat; background-size: contain; border-style: none; display: flex;">
                                      <video controls (click)="toggleVideo()" #videoPlayer>
                                        <source [src]="imgUrl+item['url']" [type]="item['mimetype']" />
                                        Browser not supported
                                      </video>
                                    </div>
                                  </ng-container>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div role="none"
              style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; left: -44px; top: 0px; bottom: 0px; justify-content: center; opacity: 1; transition: none 0s ease 0s;">
              <button role="button" (click)="plusSlides(-1)" title="Previous" aria-label="Previous"
                style="position: relative; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: center; justify-content: center; background-color: rgba(0, 0, 0, 0.65); border-color: transparent; text-align: left; border-width: 0px; padding-top: 35px; padding-bottom: 35px; left: 44px; padding-left: 14px; cursor: pointer; border-style: solid;">
                <div aria-hidden="true" data-text-as-pseudo-element="" dir="auto"
                  style="position: relative; display: inline; flex-grow: 0; flex-shrink: 0; overflow: visible; white-space: pre-wrap; overflow-wrap: break-word; height: 44px; font-size: 44px; color: rgb(213, 217, 222); background-color: rgba(0, 0, 0, 0);  padding: 0px; flex-direction: row; align-self: center; align-items: center; justify-content: center; cursor: inherit;">
                  <i class="pe-7s-angle-left"></i>
                </div>
              </button>
            </div>
            <div role="none"
              style="position: absolute; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: visible; align-items: stretch; right: -44px; top: 0px; bottom: 0px; justify-content: center; opacity: 1; transition: none 0s ease 0s;">
              <button role="button" (click)="plusSlides(1)" title="Next" aria-label="Next"
                style="position: relative; display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: center; justify-content: center; background-color: rgba(0, 0, 0, 0.65); border-color: transparent; text-align: left; border-width: 0px; padding-top: 35px; padding-bottom: 35px; right: 44px; padding-right: 14px; cursor: pointer; border-style: solid;">
                <div aria-hidden="true" data-text-as-pseudo-element="" dir="auto"
                  style="position: relative; display: inline; flex-grow: 0; flex-shrink: 0; overflow: visible; white-space: pre-wrap; overflow-wrap: break-word; height: 44px; font-size: 44px; color: rgb(213, 217, 222); background-color: rgba(0, 0, 0, 0);  padding: 0px; flex-direction: row; align-self: center; align-items: center; justify-content: center; cursor: inherit;">
                  <i class="pe-7s-angle-right"></i>
                </div>
              </button>
            </div>
            <div role="none"
              style="position: absolute; display: flex; flex-direction: row; flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: center; left: 0px; right: 0px; justify-content: flex-start; opacity: 1; transition: none 0s ease 0s;">
              <div
                style="position: absolute; overflow: visible; background-color: rgba(0, 0, 0, 0); flex-grow: 0; flex-shrink: 0; top: 0px; bottom: 0px; right: 0px; left: 0px; background-position: center center; background-repeat: no-repeat; background-size: 100% 100%; border-style: none; display: flex; margin-top: 60px;">
              </div>
              <div role="none"
                style="justify-content: flex-end;position: relative; display: flex; flex-direction: row; flex-grow: 1; flex-shrink: 1; overflow: hidden; align-items: flex-start; align-self: stretch; margin-top: 60px !important;">
                <button role="button" (click)="closeFancyModal()" title="Close" aria-label="Close picture."
                  style="position: relative; display: flex; flex-direction: column;  border-radius: 30px;  margin-top: 13px;flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: center; justify-content: center; background-color: #b72222; border-color: transparent; text-align: left; border-width: 0px; width: 48px; height: 48px; padding: 0px; cursor: pointer; border-style: solid;">
                  <div aria-hidden="true" data-text-as-pseudo-element="" dir="auto"
                    style="position: relative; display: inline; flex-grow: 0; flex-shrink: 0; overflow: visible; white-space: pre-wrap; overflow-wrap: break-word; height: 24px; font-size: 24px; color: rgb(255, 255, 255); background-color: rgba(0, 0, 0, 0);  padding: 0px; flex-direction: row; align-self: center; align-items: center; justify-content: center; cursor: inherit;">
                    <i class="pe-7s-close"></i>
                  </div>
                </button>
              </div>
            </div>
            <div role="none"
              style="position: absolute; display: flex; flex-direction: row; flex-grow: 0; flex-shrink: 0; overflow: hidden; align-items: center; left: 0px; right: 0px; justify-content: flex-start; bottom: 0px; opacity: 1; transition: none 0s ease 0s;">
              <div
                style="position: absolute; overflow: visible; background-color: rgba(0, 0, 0, 0); flex-grow: 0; flex-shrink: 0; top: 0px; bottom: 0px; right: 0px; left: 0px; transform: scaleY(-1); background-position: center center; background-repeat: no-repeat; background-size: 100% 100%; border-style: none; display: flex;">
              </div>
              <div role="none"
                style="position: relative; display: flex; flex-direction: row; flex-grow: 1; flex-shrink: 1; overflow: hidden; align-items: stretch;">
                <div role="none"
                  style="position: relative; display: flex; flex-direction: column; flex-grow: 1; flex-shrink: 1; overflow: hidden; align-items: stretch; height: 48px; padding-left: 10px; padding-right: 10px;">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
