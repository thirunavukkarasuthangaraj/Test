<app-header></app-header>
<div class="color-line"></div>
<!-- <ngx-spinner></ngx-spinner> -->
<div class="marge_top ">

  <div class="register-container setPassHeight">
    <!-- <div class="row"> -->
        <!-- <div class="col-md-12"> -->
            <!-- <div class="text-center m-b-md">
              <img class="app-logo" src="assets/images/CareOnline.jpeg" width="25%">
            </div> -->
            <div  *ngIf="showForm">
                <div class="panel-body" style="margin-right: 48px;background-color: white;">
                  <div class=" m-b-md ColLog" >
                    <img class="app-logo" src="assets/images/CareOnline.jpg" width="25%">
                  </div>
                        <form [formGroup]="setpassword" class="custom-form">
                            <div class="row">
                              <div class="form-group col-lg-6" >
                                <div *ngIf="oldnewsame" class="text-center">
                                  <p style="color: red;">Old Password and new password cannot be same</p>
                                </div>
                                <div class="text-center">
                                  <h4>Sign In</h4>
                                </div>
                                <div class="row">
                                  <div class="form-group col-lg-12">
                                    <label>Email Address</label>
                                    <input type="text" style="border-radius: 0;" formControlName="email"
                                     value="" id="" class="form-control" name="" readonly  >
                                    <!-- <input type="text" formControlName="email"  value="" id="" class="form-control" name="" [attr.disabled]="true"> -->
                                  </div>
                                  <div class="form-group col-lg-12">
                                      <label>Password</label>
                                      <div class="input-group">
                                        <input type="password" style="border-radius: 0;"   (keypress)="keyDown($event)" trim="blur" [type]="passwordShownpwd ? 'password':'text'"
                                         class="form-control" formControlName="pwd" placeholder=" Enter Password" aria-describedby="basic-addon1"
                                         appBlockCopyPaste>
                                        <span class="input-group-btn">
                                          <button class="btn btn-default" style="border-radius: 0;" type="button"
                                          (click)="passwordShownpwd = !passwordShownpwd" >
                                           <i
                                                  class="fa"
                                                  [ngClass]="{
                                                    'fa-eye': passwordShownpwd,
                                                    'fa-eye-slash': !passwordShownpwd
                                                  }"
                                                  >
                                                </i>
                                          </button>
                                        </span>
                                      </div>
                                      <!-- <input type="password" formControlName="pwd" value="" id="" class="form-control" name=""> -->
                                      <!-- <app-password-strength [passwordToCheck]="setpassword.value.pwd"></app-password-strength> -->
                                  </div>
                                  <div class="form-group col-lg-12">
                                      <label>Verify Password</label>
                                      <div class="input-group">
                                        <input type="password" style="border-radius: 0;" trim="blur" (keypress)="keyDown($event)" [type]="passwordShowncpwd ? 'password':'text'"
                                         class="form-control" formControlName="cpwd" placeholder="Re-Enter Password"
                                         aria-describedby="basic-addon1" appBlockCopyPaste>
                                        <span class="input-group-btn">
                                          <button class="btn btn-default" style="border-radius: 0;"
                                           type="button" (click)="passwordShowncpwd = !passwordShowncpwd">
                                           <i
                                                  class="fa"
                                                  [ngClass]="{
                                                    'fa-eye': passwordShowncpwd,
                                                    'fa-eye-slash': !passwordShowncpwd
                                                  }"
                                                  >
                                                </i>
                                          </button>
                                        </span>
                                      </div>
                                      <!-- <input type="password" formControlName="cpwd" value="" id="" class="form-control" name=""> -->
                                      <!-- <div *ngIf=" sign2.cpwd.invalid && (sign2.cpwd.dirty || sign2.cpwd.touched)" >
                                        <label class="text-danger" *ngIf="setpassword.controls['cpwd'].hasError('NoPassswordMatch')" >
                                          Password do not match
                                        </label>
                                      </div> -->
                                      <div *ngIf=" sign2.cpwd.invalid && (sign2.cpwd.dirty || sign2.cpwd.touched)" >
                                        <div *ngIf=" sign2.cpwd.errors" class="text-danger">
                                          <!-- <div *ngIf="sign2.cpwd.errors.required">Confirm Password is required</div> -->
                                          <div *ngIf="sign2.cpwd.errors.mustMatch">Password do not match</div>
                                        </div>
                                      </div>
                                      <!-- <div *ngIf=" sign2.cpwd.errors" class="invalid-feedback">
                                        <div *ngIf="sign2.cpwd.errors.required">Confirm Password is required</div>
                                        <div *ngIf="sign2.cpwd.errors.mustMatch">Passwords must match</div>
                                      </div> -->
                                      <!-- <label class="text-danger" *ngIf="setpassword.controls['cpwd'].hasError('NoPassswordMatch')" >
                                        Password do not match
                                      </label> -->
                                      <!-- <div *ngIf="sign2.cpwd.errors.mustMatch">Passwords must match</div> -->
                                  </div>
                                  <div class="text-center">
                                    <p>By clicking Sign In, I agree to CareOnline's
                                      Terms of Service, Privacy and Cookie Policy</p>
                                  </div>
                                </div>
                                <button class="btn primary-btn btn-sm btn-block"  *ngIf ="!resetassflag" style="margin-right: 1rem; border-radius: 0;"
                                (click)="SetPasswordset()" [disabled]="!setpassword.valid"
                                  >Sign In</button>
                                 <button class="btn primary-btn btn-sm btn-block"  *ngIf ="resetassflag" style="margin-right: 1rem;border-radius: 0;" type="submit"
                                 [disabled]="!setpassword.valid" (click)="SetPasswordNewUser()"
                                 >Sign In</button>
                              </div>
                              <div class="form-group col-lg-6" style="display: flex; margin-top: 40px;">
                                <div class="">
                                  <div style="margin-left: 20px;">
                                    <h5>Your Password must have</h5>
                                  </div>
                                  <div class="panel-body">
                                    <label [ngClass]="setpassword.controls['pwd'].hasError('required') ||
                                    setpassword.controls['pwd'].hasError('minlength') ||
                                    setpassword.controls['pwd'].hasError('maxlength') ? 'textColor' : 'text-success'" >
                                      <span class="iwt display-flex" >
                                          <i class=" pull-left material-icons">
                                              {{ setpassword.controls['pwd'].hasError('required') ||
                                              setpassword.controls['pwd'].hasError('minlength') ||
                                              setpassword.controls['pwd'].hasError('maxlength') ? 'cancel' :
                                              'check_circle' }}
                                            </i><span class="aligement"> 8 - 15 alphanumeric characters </span>
                                      </span>

                                     <!-- 8 or more alphanumeric characters -->
                                    </label>

                                    <label class="col" [ngClass]="setpassword.controls['pwd'].hasError('required') ||
                                    setpassword.controls['pwd'].hasError('hasNumber')  ? 'textColor' : 'text-success'" >
                                    <span class="iwt display-flex" >
                                        <i class="pull-left material-icons ">
                                            {{ setpassword.controls['pwd'].hasError('required') ||
                                            setpassword.controls['pwd'].hasError('hasNumber') ? 'cancel' :
                                            'check_circle' }}
                                          </i><span class="aligement margin-top">At least one number</span>

                                    </span>

                                    </label>
                                     <br>
                                    <label class="col" [ngClass]="setpassword.controls['pwd'].hasError('required') ||
                                    setpassword.controls['pwd'].hasError('hasCapitalCase')  ? 'textColor' : 'text-success'">
                                    <span class="iwt display-flex" >
                                        <i class="pull-left material-icons ">
                                            {{ setpassword.controls['pwd'].hasError('required') ||
                                            setpassword.controls['pwd'].hasError('hasCapitalCase') ? 'cancel' :
                                            'check_circle' }}
                                          </i><span class="aligement margin-top">At least one uppercase letter</span>

                                    </span>

                                    </label>

                                    <label class="col" [ngClass]="setpassword.controls['pwd'].hasError('required') ||
                                    setpassword.controls['pwd'].hasError('hasSmallCase')  ? 'textColor' : 'text-success'">
                                    <span class="iwt display-flex" >
                                        <i class="pull-left material-icons ">
                                            {{ setpassword.controls['pwd'].hasError('required') ||
                                            setpassword.controls['pwd'].hasError('hasSmallCase') ? 'cancel' :
                                            'check_circle' }}
                                          </i><span class="aligement margin-top">At least one lowercase letter</span>

                                    </span>

                                    </label>

                                    <label  class="col" [ngClass]="setpassword.controls['pwd'].hasError('required') ||
                                    setpassword.controls['pwd'].hasError('hasSpecialCharacters') ? 'textColor' : 'text-success'" >
                                    <span class="iwt display-flex" >
                                        <i class="pull-left material-icons">
                                            {{ setpassword.controls['pwd'].hasError('required') ||
                                            setpassword.controls['pwd'].hasError('hasSpecialCharacters') ? 'cancel' :
                                            'check_circle' }}
                                          </i><span class="aligement margin-top">At least one special character</span>

                                    </span>

                                    </label>
                                  </div>
                                  <app-password-strength [passwordToCheck]="setpassword.value.pwd"></app-password-strength>
                                </div>
                              </div>

                            </div>
                            <div class="text-center">
                                <!-- <button class="btn btn-info"   *ngIf="!resetassflag" style="margin-right: 1rem;"
                                (click)="SetPasswordset()" [disabled]="!setpassword.valid"
                                  >Save</button> -->

                                 <!-- <button class="btn btn-success"   *ngIf="resetassflag" style="margin-right: 1rem;" type="submit"
                                  [disabled]="!setpassword.valid"
                                 (click)="UserType.show()" >Save</button> -->

                                 <!-- <button class="btn btn-info btn-sm btn-block"   *ngIf="resetassflag" style="margin-right: 1rem;" type="submit"
                                 [disabled]="!setpassword.valid" (click)="SetPasswordNewUser()"
                                 >Save</button> -->

                                <!-- <button class="btn btn-default" (click)="onReset()"> Cancel</button> -->
                            </div>
                        </form>
                </div>
            </div>
            <div *ngIf="!showForm">
              <div class="panel-body">
                <div class=" m-b-md ColLog" style="background-color: white;">
                  <img class="app-logo" src="assets/images/CareOnline.jpeg" width="25%">
                </div>
                <div>
                  <div class="text-center" *ngIf= " error === 'LINK_EXPIRED' ">
                    <!-- <div class="text-center font-normal font-bold"> -->
                    <h5 class="link_expired_msg">
                      Oops looks like your Activation link has expired, please hit the
                      <b>Resend Activation Link</b> button to receive a
                      new link
                    </h5>
                    <button class="btn btn-primary" (click)="sendActivationLink()"
                    role="button">Resend Activation Link</button>
                  </div>
                  <div class="text-center" *ngIf="error==='INVALID_LINK'">
                    <!-- <div class="text-center font-normal font-bold" > -->
                    <h5 class="link_invalid_msg">
                      Looks like you have already registered with CareOnline, please <b>login</b>,
                      or if you have forgotten your password please use the <b>Forgot password</b>
                      button to reset your password.
                    </h5>
                    <button class="btn btn-primary" style="margin-right: 1rem;" [routerLink]="['/login']"
                    role="button">Login</button>
                    <button class="btn btn-secondary" [routerLink]="['/Forgotpassword']"
                    role="button">Forgot password</button>
                  </div>
                  <div class="text-center" *ngIf="error=='UNEXPECTED'">
                    <!-- <div class="text-center font-normal font-bold" > -->
                    <h5>
                      Oops looks like the link has been expired, if you have registered already please <b>login</b>,
                      or if you have forgotten your password please use the <b>Forgot password</b>
                      button to reset your password.
                    </h5>
                    <button class="btn btn-primary" style="margin-right: 1rem;" [routerLink]="['/login']"
                    role="button">Login</button>
                    <button class="btn btn-secondary" [routerLink]="['/Forgotpassword']"
                    role="button">Forgot password</button>
                  </div>
                  <div class="text-center" *ngIf="createLinkRes">
                    <p>Link has been sent to your Email Address</p>
                    <button class="btn primary-btn btn-sm" [routerLink]="['/login']"
                      routerLinkActive="router-link-active">
                      Thank you
                    </button>
                  </div>
                </div>
              </div>
            </div>
        <!-- </div> -->
    <!-- </div> -->
</div>

</div>
<!-- <div style="margin-top:17rem"> -->
  <app-new-footer></app-new-footer>

