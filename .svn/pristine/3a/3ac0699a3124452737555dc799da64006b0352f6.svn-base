<div class="business-list-view col-md-12 padding-right-0 padding-left-0">
  <div class="business-list-view-search CommNav post-box-shadow margin-bottom-5 margin-right-5">
    <div class="Bnav">
      <div class="Bnav-item-1">
        <p class="font-size-bold font-12s" data-toggle="tooltip" data-placement="top" title="{{values.bussinessName}}">
          {{values.bussinessName | truncate : 15 }}
        </p>
        <div style="margin-top: -9px;">
          <p *ngIf="values.admindata?.length==1">{{values.admindata?.length}} Admin</p>
          <p *ngIf="values.admindata?.length>1">{{values.admindata?.length}} Admins</p>
        </div>
      </div>
      <div class="Bnav-item-2">
        <div>
          <div class="input-group">
            <!-- <input type="text" class="form-control" placeholder="Search Admin"  [(ngModel)]="name"
              [ngModelOptions]="{standalone: true}" (keyup)="keyupdata($event)" (keyup.enter)="onsearch(name)" aria-label="Amount (to the nearest dollar)">
              <span class="input-group-addon"  (click)="onsearch(name)" id="my_btn" ><i class="pe-7s-search"    ></i></span>           -->

            <input type="text" class="form-control" placeholder="Search Admin" [(ngModel)]="searchKey"
              [ngModelOptions]="{standalone: true}" aria-label="Amount (to the nearest dollar)">
            <span class="dummyBtn"></span>

          </div>
        </div>
      </div>
      <div class="Bnav-item-3">
        <div class="btn-group " dropdown container="body">
          <button id="button-container" class="btn primary-btn btn-sm dropdown-toggle "
            aria-controls="dropdown-container" disabled>
            <i class="pe-7s-filter"></i>
          </button>
          <ul id="dropdown-container" *dropdownMenu class="dropdown-menu" role="menu"
            aria-labelledby="button-container">
            <li role="menuitem"><a class="dropdown-item"  >All Active Employees</a></li>
            <li role="menuitem"><a class="dropdown-item"  >Ignored</a></li>
            <li role="menuitem"><a class="dropdown-item"  >Revoked</a></li>
            <li role="menuitem"><a class="dropdown-item"  >Admin</a></li>
          </ul>
        </div>
      </div>
      <div class="Bnav-item-4">
        <!-- <button class="btn primary-btn btn-sm"  disabled >Advance Search</button> -->
        <button type="submit" *ngIf="superadminflag" class="btn primary-btn btn-sm right"
          (click)="openModal(adminTemplate)">
          Add Admin<span class="iuiy"> <i class="pe-7s-add-user font-15"></i> </span>
        </button>
      </div>
      <!-- <div class="Bnav-item-5">
        <button type="submit" *ngIf="superadminflag"
                  class="btn primary-btn btn-sm right" (click)="openModal(adminTemplate)">
                  <i class="fa fa-plus"></i> Add Admin
        </button>
      </div> -->
    </div>
  </div>
  <div class="">

    <ng-container *ngIf="!superadminflag">
      <div class="col-sm-12 col-md-6 col-lg-4 padding-right-5 padding-left-0" style="margin-bottom: 10px;"
        *ngFor="let admin of values.admindata | customFilter:{userName:searchKey}:false">
        <app-user-card [button]="'PRIMARY'" [userDataInput]="admin"></app-user-card>
      </div>
    </ng-container>

    <ng-container *ngIf="superadminflag">
      <div class="col-sm-12 col-md-6 col-lg-4 padding-right-5 padding-left-0" style="margin-bottom: 26px;"
        *ngFor="let admin of values.admindata | customFilter:{userName:searchKey}:false;index as i ">
        <!-- <app-user-card [userDataInput]="item"></app-user-card> -->
        <div class="hpanel margin-bottom-5 contact-panel" style="height: fit-content !important;">
          <div class="panel-body" style="height:15.7rem !important; padding: 10px;" (click)="userprofile(admin.userId)">
            <div class="pull-right" *ngIf="admin.userId == loginUserId && !superadminflag">
              <span class="label label-info font-normal" style="font-size: 11px;">You</span>
            </div>

            <div class="btn-group iou pull-right m-t-m-15">
              <div class="btn-group  m-t-1rm" style="float: right !important; " dropdown>
                <button type="button" class="btn primary-btn  btn-xs crv commom-font-12"
                  *ngIf="admin.userId==userId&&values.isSuperAdmin && admin.type!='ADMIN'"
                  (click)="transferModal(transferTemplate);$event.stopPropagation();">Transfer Rights</button>

                  <button type="button" class="btn btn-primary b-5 ieoslf btn-xs"
                  *ngIf="admin.userId!=userId"
                  (click)="sendmsg(admin);$event.stopPropagation();">Send Message
                  <i class="pe-7s-mail jwsk" aria-hidden="true"></i></button>

                <div class="btn-group three_icon_cmon1 hovers" id="the-dropdown" dropdown
                (click)="$event.stopPropagation();">
                <a id="button-animated" dropdownToggle
                (click)="$event.stopPropagation();" data-toggle="dropdown"
                *ngIf="admin.userId!=userId&&values.isSuperAdmin && admin.type=='ADMIN'" class="m-r-10">
                  <img src="assets/icon/icon-vert-thr-dot.png" alt="" srcset="" class="Vthree-dote">
                </a>
                <ul class="dropdown-menu r-0-l-auto fnt-12" *dropdownMenu role="menu">
                  <!-- <li><a (click)="sendmsg(admin);$event.stopPropagation();">Send Message</a></li> -->
                  <li *ngIf="values.isSuperAdmin && admin.type=='ADMIN'" role="menuitem"><a
                      class="dropdown-item commom-font-12"
                      (click)="superAdmin(superAdminTemplate,admin.userId);$event.stopPropagation();"> Make Super
                      Admin</a></li>
                  <li *ngIf="values.isSuperAdmin && admin.type=='ADMIN'" role="menuitem"><a
                      class="dropdown-item commom-font-12"
                      (click)="revoke(revokeTemplate,admin.userId);$event.stopPropagation();">Revoke</a> </li>
                </ul>
              </div>
              </div>
            </div>
            <img alt="logo" class="img-circle" src={{admin.photo}}>
            <img alt="logo" class="img-circle" *ngIf="admin.photo==undefined || admin.photo==null || admin.photo==''"
              src="assets/images/gallery/1.jpg">
            <div style="padding-left: 1rem;">
              <div class="row">
                <div class="col-sm-8" style="padding-right: 0px;">
                  <h3 class="ellipse font-bold-14" style="padding-bottom: 1px;"><a (click)="userprofile(admin.userId)"
                      data-toggle="tooltip" data-placement="top" title="{{admin.fullName}}">{{admin.fullName }}</a></h3>
                </div>
                <div class="col-sm-4">
                  <div>
                      <span *ngIf="admin.type=='SUPERADMIN'"><img class="crown" title="Owner" src="assets/icon/crown_.PNG" alt=""></span>
                      <span  *ngIf="admin.type=='ADMIN'"><img class="crown" title="Admin" src="assets/icon/admin_cogs.PNG" alt=""></span>
                  </div>
                </div>
               
              </div>
  
                <p class="ellipse" data-toggle="tooltip" data-placement="top" title="{{admin.title}}">
                  {{admin.title }}
                </p>
              <p class="ellipse" data-toggle="tooltip" data-placement="top" title="{{admin.organisation}}">
                {{admin.organisation }}
              </p>
              <!-- <hr> -->
              <div class="row" style="position: relative; top: 2rem; right: 0.4rem; background-color: #f1f3f6 ;">
                <div class="col-md-6 border-right">
                  <div class="contact-stat"><span>Connections: </span>
                    <strong *ngIf="admin.connectionCnt === null || admin.connectionCnt === undefined">0</strong>
                    <strong *ngIf="admin.connectionCnt !== null && admin.connectionCnt !== undefined">{{admin.connectionCnt}}</strong>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="contact-stat"><span>Posts: </span>
                    <strong *ngIf="admin.postCnt === null || admin.postCnt === undefined">0</strong>
                    <strong *ngIf="admin.postCnt !== null && admin.postCnt !== undefined">{{admin.postCnt}}</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
        <hr style="margin: 0px !important; position: relative; top: -5rem;">
      </div>
    </ng-container>

  </div>

</div>
<ng-template #adminTemplate>
  <div class="modal-content">
    <!-- <button type="button" class="close pull-right" aria-label="Close" (click)="close()">
      <span style="font-size: 27px; margin-right: 10px;" aria-hidden="true">&times;</span>
    </button>
    <h5 style="padding: 10px;">Add Admin </h5>
    <hr style="margin-top: 0px; margin-bottom: 0px;"> -->

    <div style="    padding: 14px 14px !important;">
      <label>Add Admin</label>
      <button type="button" class="close pull-right" aria-label="Close" (click)="close()">
        <span style="font-size: 2.5rem; position: relative; top: -0.5rem;" aria-hidden="true">&times;</span>
      </button>
    </div>
    <hr style="margin: 0px !important; padding: 0px !important">


    <div class="modal-body">
      <div class="container-fluid">
        <div>
          <div class="row">
            <p>Only Employees of this Business who are connected to you can be added as Admins</p>
          </div>
          <div [formGroup]="serachForm">
            <div class="form-group">
              <div class="row">
                <div class="ng-autocomplete width-500"
                  style="color: black !important; background-color: black !important;">
                  <ng-autocomplete [data]="employeeList" [searchKeyword]="keyword" (inputCleared)='cleardata($event)'
                    (selected)='selectEvent($event)' (inputChanged)='onChangeSearch($event)' (input)="cleardata($event)"
                    formControlName="serachData" (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate"
                    placeHolder="Search in name" [notFoundTemplate]="notFoundTemplate">
                  </ng-autocomplete>
                  <ng-template #itemTemplate let-item>
                    <!-- <div class="flex"  >
                      <img class="name-diff" src="{{item.photo}}" >
                      <a  routerLinkActive="router-link-active" [innerHTML]="item.userName"></a>
                    </div> -->

                    <div class="item">
                      <img class="name-diff" src="{{item.photo}}">
                      <a routerLinkActive="router-link-active" [innerHTML]="item.userName"></a> &nbsp;
                    </div>

                  </ng-template>
                  <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                  </ng-template>
                </div>
              </div>
            </div>
            <div style="float: right ; margin-right:3rem">
              <button class="btn secondary-btn btn-sm" (click)="decline()">Cancel</button>
              <button class="btn primary-btn btn-sm" style="margin-left: 5px" (click)="addAdmin()">Add Admin</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #transferTemplate>
  <div class="modal-content">
    <!-- <button type="button" class="close pull-right" aria-label="Close" (click)="decline()">
      <span style="font-size: 27px; margin-right: 12px;;" aria-hidden="true">&times;</span>
    </button>
    <h5 style="padding: 10px;">Transfer Super Admin Rights </h5>
    <hr style="margin-top: 0px; margin-bottom: 0px;"> -->

    <div style="    padding: 14px 14px !important;">
      <label>Transfer Super Admin Rights</label>
      <button type="button" class="close pull-right" aria-label="Close" (click)="decline()">
        <span style="font-size: 2.5rem; position: relative; top: -0.5rem;" aria-hidden="true">&times;</span>
      </button>
    </div>
    <hr style="margin: 0px !important; padding: 0px !important">

    <div class="modal-body">
      <div class="container-fluid">
        <div class="row">
          <p>You will no longer be the Super Admin of this Business Page and will not be able to manage other Admins.
          </p>
          <p>Super Admin rights can be transfered only to other employees connected</p>
        </div>
        <div [formGroup]="serachForm">
          <div class="form-group">
            <div class="row">
              <div class="ng-autocomplete width-500"
                style="color: black !important; background-color: black !important;">
                <ng-autocomplete [data]="autoCompleteAdminList" [searchKeyword]="keyword"
                  (selected)='selectEvent1($event)' (inputChanged)='onChangeSearch($event)' formControlName="serachData"
                  (inputFocused)='onFocused1($event)' [itemTemplate]="itemTemplate" placeHolder="Search In Name"
                  [notFoundTemplate]="notFoundTemplate">
                </ng-autocomplete>
                <ng-template #itemTemplate let-item>
                  <div class="item">
                    <img class="name-diff" src="{{item.photo}}">
                    <a routerLinkActive="router-link-active" [innerHTML]="item.userName"></a> &nbsp;
                  </div>
                </ng-template>
                <ng-template #notFoundTemplate let-notFound>
                  <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
        <div class="row float-r">
          <button class="btn default-btn btn-sm" style="margin-right: 5px;" (click)="decline()">Cancel</button>
          <button class="btn primary-btn btn-sm" (click)="makeSuperadmin()">Make Super Admin</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #revokeTemplate>
  <div class="modal-content">
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span style="font-size: 27px; margin-right: 14px;" aria-hidden="true">&times;</span>
    </button>
    <h5 style="padding: 10px;">Revoke </h5>
    <hr style="margin-top: 0px; margin-bottom: 0px;">
    <div class="modal-body">
      <div class="container-fluid">
        <div class="row">
          <p>Once you revoke Admin rights, user will no longer be able to manage this page</p>
        </div>
        <div class="row" style="padding-left: 78%;">
          <button class="btn default-btn btn-sm" style="border-radius: 3px;" (click)="decline()">Cancel</button>
          <button class="btn primary-btn btn-sm" style="margin-left: 10px;" (click)="removeAdmin()">Revoke</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #superAdminTemplate>
  <div class="modal-content">
    <!-- <button type="button" class="close" aria-label="Close" (click)="modalRef.hide()">
      <span style="font-size: 27px; margin-right: 13px;" aria-hidden="true">&times;</span>
    </button>
    <h5 style="padding: 10px;">Make Super Admin </h5>
    <hr style="margin: 0px;"> -->

    <div style="    padding: 14px 14px !important;">
      <label>Make Super Admin </label>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span style="font-size: 2.5rem; position: relative; top: -0.5rem;" aria-hidden="true">&times;</span>
      </button>
    </div>
    <hr style="margin: 0px !important; padding: 0px !important">


    <div class="modal-body">
      <div class="container-fluid">
        <div class="row">
          <p>Only Employees of this Business who are connected to you can be added</p>
        </div>
        <div class="custom-form">
          <div [formGroup]="serachForm">
            <div class="form-group">
              <div class="row" style="padding-left: 40px;">
                <div class="ng-autocomplete width-500"
                  style="color: black !important; background-color: black !important;">
                </div>
              </div>
            </div>
            <div class="text-right">
              <button class="btn btn-default btn-sm " (click)="decline()">
                Cancel
              </button>
              <button style="margin-left:2%;" class="btn primary-btn btn-sm " type="button" (click)="makeadmin()">
                Make Super Admin
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
